---
title: "GoldenDeathX"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    theme: spacelab    
---

```{r setup, echo=FALSE, include=TRUE}
library(data.table)
library(dplyr)
library(DT)
library(flexdashboard)
library(formattable)
library(hydroTSM)
library(PerformanceAnalytics)
library(plotly)
library(quantmod)
library(scales)
library(tidyquant)
library(treemap)
library(xts)
library(zoo)
knitr::opts_knit$set(root.dir = "..")
```

```{r price, echo=FALSE}
SPL <- tq_get("SPL.AX")
SPL<-
  SPL[complete.cases(SPL),]

SPL.AX <- 
    SPL.AX %>%
    na.omit()

xtsPrices <- 
  getSymbols(symbols, src = 'yahoo', 
             auto.assign = TRUE, 
             warnings = FALSE) %>% 
  map(~Ad(get(.))) %>% 
  reduce(merge) %>%
  `colnames<-`(symbols)
```

```{r returns, echo=FALSE}
SPL.AX.monthly <- SPL.AX[endpoints(SPL.AX, on ="months")]
spl_month_close <- SPL.AX.monthly[,4]
tRet<-periodReturn(SPL.AX,period='yearly')
SPL.AX.yearly<-data.table(date=index(tRet), coredata(tRet))
```

```{r, performance, eval=spl_month_close, echo=FALSE, fig.width= 15}
charts.PerformanceSummary(
    ROC(spl_month_close, n = 1, type = "discrete"),
    main = "SPL Performance Summary"
)
```

```{r vbox, eval=spl_month_close}
valueBox(end(SPL.AX)-start(SPL.AX), icon = "fa-pencil", href="#details")
```


```{r tables-mtcars}
knitr::kable(iris[1:5, ], caption = 'A caption')
```

Boxplots {data-navmenu="Enrollment Summary"}
=====================================

column {data-width=1000}
-----------------------------------------------------------------------

### Performance Summary by Month

```{r Returns-Summary-Month, echo=FALSE, out.width= 15}
spl_month_close <- readRDS("spl_month_close.rds")
charts.PerformanceSummary(
    ROC(spl_month_close, n = 1, type = "discrete"),
    main = "SPL Performance Summary", width = 1000
)
```

Row {data-width=500}
-----------------------------------------------------------------------

### Yearly Returns

```{r Returns-Distribution-Yr, echo=FALSE}
spl_yearly <- readRDS("spl_yearly.rds")
plot_ly(spl_yearly, x = ~date, y = ~yearly.returns, type = 'bar', name = 'Returns by Year')
```

Charts {data-navmenu="Enrollment Summary"}
=====================================

Row {data-width=500}
-----------------------------------------------------------------------

### Return Distribution Golden Cross

```{r Boxplot-Distribution-GoldenDeathX, echo=FALSE}
returnsByCategory <- readRDS("returnsByCategory.rds")
chart.Boxplot(data.table(returnsByCategory) %>% select(starts_with("n")))
```

Column {data-width=350}
-----------------------------------------------------------------------

### Six Year Enrollment Trend

```{r  Total-Enrollment-Trends, echo=FALSE, include=TRUE}

```

### Enrollment TYpe by Year

```{r}

```

### Current Year Enrollment Treemap

```{r}

```

Tables {data-navmenu="Enrollment Summary"}
=====================================  

Column
-------------------------------------
    
### Table 1
    
```{r}

```
   
Row
-------------------------------------
    
### Table 2
    
```{r}

```
    
### Table 3

```{r}

```

Length {data-navmenu="Institution Overview"}
=====================================

Row
-----------------------------------------------------------------------

### Program Length - 2 Year

```{r  Length-Two-Yr, echo=FALSE}

```

Row
-----------------------------------------------------------------------

### Program Length - 4 Year

```{r Length-Four-Yr, echo=FALSE}

```

Type {data-navmenu="Institution Overview"}
=====================================  

Row
-------------------------------------
    
### Program Type - Independent
    
```{r Type-Independent, echo=FALSE}

```
   
Row
-------------------------------------
    
### Program Type - Public
    
```{r Type-Public, echo=FALSE}

```

Charts {data-navmenu="College Detail"}
=====================================     

Column {data-width=350}
-----------------------------------------------------------------------

### Cost of Attendance-Graduate Resident

```{r COA-Grad-Resident2, echo=FALSE}

```

### Cost of Attendance-Graduate Non Resident

```{r}

```

Tables {data-navmenu="College Detail"}
=====================================    

Row {data-width=450}
-------------------------------------
    
### Top 10 Institutions

```{r Top-10-Institutions, echo=FALSE}

```
    
### Bottom 10 Institutions

```{r Bottom-10-Institutions, echo=FALSE}

```

Row
-------------------------------------
    
### Institutional Ranking
    
```{r}

```

Page 1 {data-navmenu="Fin Aid Awd"}
=====================================    

Row
-------------------------------------
    
### Financial Aid Award-Undergraduate Resident

```{r Fin-Aid-Awd-Undergrad-Resident, echo=FALSE}

```
    
### Financial Aid Award Non Resident

```{r Fin-Aid-Awd-NonResident, echo=FALSE}

```

Column
-------------------------------------
    
### Financial Aid Award
    
```{r}

```

Page 2 {data-navmenu="Fin Aid Awd"}
=====================================    

Column 
-------------------------------------
    
### Chart 1
    
```{r}

```
   
Column {.tabset}
-------------------------------------
   
### Chart 2

```{r Fin-Aid-Awd2-Undergrad-Resident, echo=FALSE}

```
 
### Chart 3
    
```{r Fin-Aid-Awd2-NonResident, echo=FALSE }

```
