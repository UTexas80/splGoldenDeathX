################################################################################
# 0000 Main
################################################################################
x0000_main   <- function(id, ...) {
# ------------------------------------------------------------------------------
#   browser()
    print("x0000_main")
    print(id)
    print(class(id))
# ------------------------------------------------------------------------------
    # [0] "x0000_main"
# ------------------------------------------------------------------------------
    x0100_setup(id, ...)        %>%
      x0200_init(id, i, ...)    %>%
        x0300_ind(id, i, ...)   %>%
          x0400_signals(id, i, ...)
# ------------------------------------------------------------------------------
}
################################################################################
# 0100 Setup
################################################################################
x0100_setup   <- function(id, ...) {
# ------------------------------------------------------------------------------
    browser()
    print("x0100_setup")
    print(id)
    print(class(id))
# ------------------------------------------------------------------------------
    dt_key <<- id
    print(dt_key)
    print(class(dt_key))
# ------------------------------------------------------------------------------
    #> [1] "x0100_setup"
# ------------------------------------------------------------------------------
   strategy.st <<- portfolio.st <<- account.st <<- dt_key[,2]    # strategy name
# ------------------------------------------------------------------------------
}
################################################################################
# 0200	Initialization
################################################################################
x0200_init    <- function(id, ...) {
# ------------------------------------------------------------------------------
    browser()
    print("x0200_init")
    print(dt_key)
    print(class(dt_key))
# ------------------------------------------------------------------------------
    print(id)
    print(class(id))
# ------------------------------------------------------------------------------
  #> [2] "x0200_initialization"
# ------------------------------------------------------------------------------
  initPortf(name              = portfolio.st,         # Portfolio Initialization
            symbols           = symbols,
            currency          = curr,
            initDate          = initDate,
            initEq            = initEq)
# ------------------------------------------------------------------------------
  initAcct(name               = account.st,           # Account Initialization
           portfolios         = portfolio.st,
           currency           = curr,
           initDate           = initDate,
           initEq             = initEq)
# ------------------------------------------------------------------------------
  initOrders(portfolio        = unlist(portfolio.st), # Order Initialization
             symbols          = symbols,
             initDate         = initDate)
# ------------------------------------------------------------------------------
  strategy(unlist(strategy.st), store = TRUE)         # Strategy initialization
# ------------------------------------------------------------------------------
}
################################################################################
# 0300	Indicators
################################################################################
x0300_ind     <- function(id, ...) {
# ------------------------------------------------------------------------------
    browser()
    print("x0300_ind")
# ------------------------------------------------------------------------------
    print(dt_key)
    print(class(dt_key))
# ------------------------------------------------------------------------------
    print(id)
    print(class(id))
# ------------------------------------------------------------------------------
    print(dt_strategy[dt_key[,1],8])
    #> [1] "x0300_Indicators"
}
################################################################################
# 0400	Signals
################################################################################
x0400_signals <- function(id, ...) {
    browser()
    print("x0400_signals")
# ------------------------------------------------------------------------------
    print(dt_key)
    print(class(dt_key))
# ------------------------------------------------------------------------------
    print(id)
    print(class(id))
# ------------------------------------------------------------------------------
  #> [1] "x0400_Signals"
}
