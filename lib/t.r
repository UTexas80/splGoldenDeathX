################################################################################
# 0000 Main
################################################################################
x0000_main   <- function(id, dt_strategy, ...) {
# ------------------------------------------------------------------------------
    browser()
    print("x0000_main")
    print(id)
    print(class(id))    
    print(dt_strategy)
    print(class(dt_strategy))
    # [0] "x0000_main"
# ------------------------------------------------------------------------------
    x0100_setup(id, dt_strategy)    %>%
      x0200_init(id)            %>%        
        x0300_ind(id)           %>%
          x0400_signals(id)
# ------------------------------------------------------------------------------
}
################################################################################
# 0100 Setup
################################################################################
x0100_setup   <- function(id, dt_strategy, ...) {
# ------------------------------------------------------------------------------
    browser()
    print("x0100_setup")
    print(id)
    print(class(id))    
    print(dt_strategy)
    print(class(dt_strategy))
    #> [1] "x0100_setup"
# ------------------------------------------------------------------------------
   strategy.st <<- portfolio.st <<- account.st <<- dt_strategy[id,9]
# ------------------------------------------------------------------------------
}
################################################################################
# 0200	Initialization
################################################################################
x0200_init    <- function(id, ...) {
# ------------------------------------------------------------------------------
  browser()
  print("x0200_init")
  print(id)
  print(class(id))
  #> [2] "x0200_initialization"
# ------------------------------------------------------------------------------
  initPortf(name              = portfolio.st,         # Portfolio Initialization
            symbols           = symbols,
            currency          = curr,
            initDate          = initDate,
            initEq            = initEq)
# ------------------------------------------------------------------------------
  initAcct(name               = account.st,           # Account Initialization
           portfolios         = portfolio.st,
           currency           = curr,
           initDate           = initDate,
           initEq             = initEq)
# ------------------------------------------------------------------------------
  initOrders(portfolio        = unlist(portfolio.st), # Order Initialization
             symbols          = symbols,
             initDate         = initDate)
# ------------------------------------------------------------------------------
  strategy(unlist(strategy.st), store = TRUE)         # Strategy initialization
# ------------------------------------------------------------------------------
}
################################################################################
# 0300	Indicators
################################################################################
x0300_ind     <- function() {
# ------------------------------------------------------------------------------
  browser()
  print("x0300_ind")
  print(id)
  print(class(id))
  print(dt_strategy[id,8])
  #> [1] "x0300_Indicators"
}
################################################################################
# 0400	Signals
################################################################################
get_strategy.x0400_signals <- function(strategy_dt, ...) {
  browser()
  print("x0400_signals")
  print(strategy_dt)
  #> [1] "x0400_Signals"
}
