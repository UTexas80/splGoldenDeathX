),
color = ifelse(Return.annualized(
na.omit(
trendReturnsDaily[,as.numeric(input$radio2.4)])[paste(format(input$dateRange2.4[1]),
format(input$dateRange2.4[2]),sep = "::")]) > 0,
"teal", "red"),
icon = "ion-cash"
)
})
# Chunk 68: 2.4.1.3-vbox-noX-returns-cumulative
cumReturn <- percent(as.numeric(Return.cumulative(trend[,9])))
flexdashboard::renderValueBox({
flexdashboard::valueBox(
paste(
as.character(
percent(
as.numeric(
Return.cumulative(
na.omit(trendReturnsDaily[,as.numeric(input$radio2.4)])[paste(format(input$dateRange2.4[1]),
format(input$dateRange2.4[2]),sep = "::")]
)
), "", " Cumulative"
),
color = ifelse(
Return.cumulative(
na.omit(
trendReturnsDaily[,as.numeric(input$radio2.4)])[paste(format(input$dateRange2.4[1]),
format(input$dateRange2.4[2]),sep = "::")]) > 0,
"teal", "red"),
icon = "ion-cash"
)
})
# Chunk 69: 2.4.1.4-vbox-noX-trade-days
flexdashboard::renderValueBox({
tradeDays <-   as.character(
ndays(
na.omit(
trendReturnsDaily[,as.numeric(input$radio2.4)])[paste(format(input$dateRange2.4[1]),
format(input$dateRange2.4[2]),sep = "::")]
)
flexdashboard::valueBox(
paste("Trade Days: ", "", tradeDays),
color = # 0000ff
, icon = "fa-calendar"
)
})
# Chunk 70: 2.4.2.1-viz-nox-posn-chartstats
renderPlot({
ind <- tolower(data.table::setorder(unique(trend[,1]))[(as.numeric(input$radio2.4) - 4),])
blotter::getPortfolio(paste0("nX", ind))
blotter::chart.Posn(paste0("nX", ind),
Symbol = "SPL.AX",
Dates  = paste(format(input$dateRange2.4[1]), format(input$dateRange2.4[2]),sep = "::"),
TA     = "add_SMA(n = 10, col = 2); add_SMA(n = 30, col = 4)")
})
# Chunk 71: 2.4.2.2-table-noX
DT::renderDataTable({
ind <- data.table::setorder(unique(trend[,1]))[(as.numeric(input$radio2.4) - 4),]
trendTable <- trend[indicator == ind]
trendTable <- trendTable[catName == "NoX" &
(startDate >= input$dateRange2.4[1] &
endDate <= input$dateRange2.4[2])][,-c(9,13:16)]
DT::datatable(trendTable,
rownames = FALSE,
extensions = c("Scroller"),
filter = 'top',
options = list(
dom = 'ltipr',
order = list(list(5, "desc"), list(0, 'asc')),
pageLength = 10,
scroller = TRUE,
scrollX = 400,
scrollY = 280
)
) %>%
formatDate(c("startDate", "endDate")) %>%
formatRound("tradeDays", 0) %>%
formatCurrency(c("startOpen", "endOpen")) %>%
formatCurrency("Net.Trading.PL", digits = 0) %>%
formatPercentage("return", 1) %>%
formatStyle("return",
background = styleColorBar(range(trend$return), "lightblue")
) %>%
formatStyle("tradeDays",
color = styleInterval(c(0), c("maroon", "darkgreen"))
)
})
# Chunk 72: 2.4.3.1-viz-noX-roi-outliers
xhp <- list(title = n$catName, titlefont = F)
yhp <- list(title = "Counts", titlefont = F)
ybp <- list(title = n$catName, titlefont = F)
renderPlotly({
ind <- unique(trend[,1])[(as.numeric(input$radio2.4) - 4),]
n   <- n[indicator == ind]
n   <- n[(startDate >= input$dateRange2.4[1] & endDate <= input$dateRange2.4[2])]
histogram <- plot_ly(n, x = n$return, type = "histogram", marker = list(color = "purple")) %>%
layout(xaxis = xhp, yaxis = yhp)
boxplot <- plot_ly(n, x = n$return, type = "box", boxpoints = "all", jitter = 0.3, marker =
list(color = "purple", outliercolor = "blue")) %>%
layout(yaxis = ybp)
subplot(boxplot, histogram, nrows = 2, shareX = TRUE) %>%
layout(
xaxis = list(tickformat = "%")
,title = "ROI with Outliers"
,bargap = 0.1
,showlegend = FALSE)
})
# Chunk 73: 2.4.3.2-viz-noX-trade-days
xhp <- list(title = n$catName, titlefont = F)
yhp <- list(title = "Counts", titlefont = F)
ybp <- list(title = n$catName, titlefont = F)
renderPlotly({
ind <- unique(trend[,1])[(as.numeric(input$radio2.4) - 4),]
n <- n[indicator == ind]
n <- n[(startDate >= input$dateRange2.4[1] &
endDate   <= input$dateRange2.4[2])]
histogramN <- plot_ly(n, x = n$tradeDays, type = "histogram", marker = list(color = "purple")) %>%
layout(xaxis = xhp, yaxis = yhp)
boxplotN <- plot_ly(n, x = n$tradeDays, type = "box", boxpoints = "all", jitter = 0.3, marker = list(color = "purple", outliercolor = "#D0A92C", line = list(outliercolor = "#D0A92C", outlierwidth = 5))) %>%
layout(yaxis = ybp)
subplot(boxplotN, histogramN, nrows = 2, shareX = TRUE) %>%
layout(showlegend = FALSE) %>%
layout(title = "# of Trade Days with Outliers", bargap = 0.1)
})
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
load(rdata/gXema.RData)
ls.str(.blotter)
chart.Posn(Portfolio = dXema)
chart.Posn(Portfolio = nXema)
chart.Posn(Portfolio = nXsma)
chart.Posn(Portfolio = gXsma)
chart.Posn(Portfolio = gXema)
load(here::here("p.RData"))
getwd()
dir()
miceadds::load.Rdata2( filename="p.Rdata")
devtools::install_github("alexanderrobitzsch/miceadds")
install.packages("miceadds")
library(miceadds)
getwd()
dir
load.Rdata2(p.RData)
load.Rdata2(/p.RData)
load.Rdata2(p.RData, path=getwd()))
load.Rdata2(p.RData, path=getwd())
load.Rdata2(here::here(p.RData))
load.Rdata2(here::here("p.RData"))
View(p)
chart.Posn(p)
chart.Posn(na.omit(p)
chart.Posn(na.omit(p))
chart.Posn(na.omit(p), SPL.AX)
chart.Posn(na.omit(p), "SPL.AX")
z <- getPortfolio(p)
z <- getPortfolio("p")
.getPortfolio(p)
chart.Posn(p$summary)
chart.Posn(p$symbols)
chart.Posn(p$symbols, "SPL.AX")
chart.Posn(p$symbols, SPL.AX)
chart.Posn(p, env = .GlobalEnv)
chart.Posn(dXema, env = .GlobalEnv)
class(dXema)
dXema
chart.Posn("p")
chart.Posn("p", envir = .blotter)
load(here::here("rdata/gXema.RData"))
load(here::here("splGoldenDeathX/rdata/gXema.RData"))
load(here::here("/rdata/gXema.RData"))
load(here::here("rdata/gXema.RData"))
load(here::here("/gXema.RData"))
load(here::here("gXema.RData"))
getwd()
load(here::here("a.RData"))
load(here::here(""C:/Users/gfalk/Documents/GitHub/splGoldenDeath/a.RData"))
load(here::here("C:/Users/gfalk/Documents/GitHub/splGoldenDeath/a.RData"))
load(here::here("C:/Users/gfalk/Documents/GitHub/splGoldenDeath/a.RData")
load("C:/Users/gfalk/Documents/GitHub/splGoldenDeath/a.RData")
load("C:/Users/gfalk/Documents/GitHub/splGoldenDeath/p.RData")
load("C:/Users/gfalk/Documents/GitHub/splGoldenDeath/dXema.RData")
base::load("a.RData")
base::load("p.RData")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
load.Rdata2("a.RData", path=getwd())
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
a1 <- base::load(here::here("a.RData"))
a2 <- load.Rdata2("a.RData", path=getwd())
p1 <- base::load(here::here("p.RData"))
p2 <- load.Rdata2("p.RData", path=getwd())
getPortfolio(p2)
p2
getPortfolio("p2")
a2
p2
p1
p2
getPortfolio(p1)
chart.Posn(getPortfolio(p1))
p1
getPortfolio(p1)
getPortfolio(p1$summary)
chart.Posn(p1$summary)
chart.Posn(p1)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
p1 <- base::load(here::here("p.RData"))
View(portfolio.dXsma)
library(blotter)
chart.Posn(portfolio.dXsma)
chart.Posn(p1)
p1
a1 <- base::load(here::here("a.RData"))
account.dXsma
portfolio.dXsma
account.dXsma
chart.Posn(a)
chart.Posn(a1)
chart.Posn(a1$portfolios$dXsma)
chart.Posn(p1)
chart.Posn(p1,portfolio.dXsma$symbols$SPL.AX )
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
addinexamples:::reformatAddin()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
# ------------------------------------------------------------------------------
saveRDS(SPL.AX,                    file  = here::here("SPL-Dashboard/rds/", "(SPL.AX.rds"))
# ------------------------------------------------------------------------------
saveRDS(SPL.AX,                    file  = here::here("SPL-Dashboard/rds/", "(SPL.AX.rds"))
# ------------------------------------------------------------------------------
saveRDS(SPL.AX,                    file  = here::here("SPL-Dashboard/rds/", "SPL.AX.rds"))
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
# ------------------------------------------------------------------------------
SPL                   <- readRDS(here::here("rds", "SPL.AX.rds"))
symbols     <- "SPL.AX"
src         <- "yahoo"
from        <- "2002-01-01"
to          <- Sys.Date()
adjust      <- TRUE
# ------------------------------------------------------------------------------
getSymbols(Symbols = symbols,
src     = src,
from    = from,
to      = to,
adjust  = adjustment)
# ------------Replace missing values (NA)       https://tinyurl.com/y5etxh8x ###
SPL.AX <-
SPL.AX %>%
na.omit()
symbols     <- "SPL.AX"
src         <- "yahoo"
from        <- "2002-01-01"
to          <- Sys.Date()
adjust      <- TRUE
# ------------------------------------------------------------------------------
getSymbols(Symbols = symbols,
src     = src,
from    = from,
to      = to,
adjust  = adjustment)
# ------------Replace missing values (NA)       https://tinyurl.com/y5etxh8x ###
SPL.AX <-
SPL.AX %>%
na.omit()
rm(SPL.AX)
symbols     <- "SPL.AX"
src         <- "yahoo"
from        <- "2002-01-01"
to          <- Sys.Date()
adjust      <- TRUE
# ------------------------------------------------------------------------------
getSymbols(Symbols = symbols,
src     = src,
from    = from,
to      = to,
adjust  = adjustment)
# ------------Replace missing values (NA)       https://tinyurl.com/y5etxh8x ###
SPL.AX <-
SPL.AX %>%
na.omit()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
# ------------------------------------------------------------------------------
SPL.AX                    <- na.omit(as.xts(readRDS(here::here("rds", "SPL.AX.rds"))),keep.rownames = TRUE)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
renderPlot({
ind <- tolower(data.table::setorder(unique(trend[,1]))[(as.numeric(input$radio2.2) - 2),])
x <- blotter::getPortfolio(paste0("gX", ind), envir = .blotter)
#    blotter::chart.Posn(paste0("gX", ind),
blotter::chart.Posn(x,
Symbol = "SPL.AX",
Dates  = paste(format(input$dateRange2.2[1]), format(input$dateRange2.2[2]),sep = "::"),
env    = .blotter,
TA     = "add_SMA(n = 20, col = 2); add_SMA(n = 50, col = 4)")
})
renderPlot({
ind <- tolower(data.table::setorder(unique(trend[,1]))[(as.numeric(input$radio2.2) - 2),])
blotter::getPortfolio(paste0("gX", ind), envir = .blotter)
blotter::chart.Posn(paste0("gX", ind),
Symbol = "SPL.AX",
Dates  = paste(format(input$dateRange2.2[1]), format(input$dateRange2.2[2]),sep = "::"),
env    = .blotter,
TA     = "add_SMA(n = 20, col = 2); add_SMA(n = 50, col = 4)")
})
renderPlot({
ind <- tolower(data.table::setorder(unique(trend[,1]))[(as.numeric(input$radio2.2) - 2),])
blotter::getPortfolio(paste0("gX", ind), envir = .blotter)
blotter::chart.Posn(paste0("gX", ind),
Symbol = "SPL.AX",
Dates  = paste(format(input$dateRange2.2[1]), format(input$dateRange2.2[2]),sep = "::"),
env    = .blotter,
TA     = "add_SMA(n = 20, col = 2); add_SMA(n = 50, col = 4)")
})
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
stock("SPL.AX", currency("AUD"), 1)
saveInstruments("MyInstruments.RData", dir=here::here("SPL-Dashboard/rdata/",))
Library(FinancialInstrument)
Library(FinancialInstruments)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
FinancialInstrument::currency("AUD")
FinancialInstrument::stock("SPL.AX", currency("AUD"), 1)
currency <- FinancialInstrument::currency("AUD")
FinancialInstrument::stock("SPL.AX", currency("AUD"), 1)
FinancialInstrument::stock("SPL.AX", currency("USD"), 1)
################################################################################
## Step 99.01 Statistics                                                     ###
################################################################################
curr     <- FinancialInstrument::currency("USD")
get_curr <- FinancialInstrument::getInstrument("USD")
FinancialInstrument::stock("SPL.AX", currency("AUD"), 1)
FinancialInstrument::stock("SPL.AX", currency("USD"), 1)
FinancialInstrument::currency(c("AUD"))                # Set the currency    ###
stock(c("SPL.AX"), currency ="AUD")
saveInstruments("MyInstruments.RData", dir=here::here("SPL-Dashboard/rdata/",))
saveInstruments("MyInstruments.RData", dir="rdata/")
saveInstruments("MyInstruments.RData", dir="SPL-Dashboard/rdata/")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
# ------------------------------------------------------------------------------
# SPL.AX <- na.omit(getSymbols('SPL.AX', auto.assign = FALSE, from = '2002-01-02', env = .blotter, warnings = FALSE))
# SPL.AX <-
#   SPL.AX %>%
#   na.omit()
# ------------------------------------------------------------------------------
loadInstruments("MyInstruments.RData", dir=here::here("rdata/"))
# ------------------------------------------------------------------------------
# SPL.AX <- na.omit(getSymbols('SPL.AX', auto.assign = FALSE, from = '2002-01-02', env = .blotter, warnings = FALSE))
# SPL.AX <-
#   SPL.AX %>%
#   na.omit()
# ------------------------------------------------------------------------------
loadInstruments("MyInstruments.RData", dir=here::here("rdata/"))
# ------------------------------------------------------------------------------
curr     <- FinancialInstrument::currency("USD")
get_curr <- FinancialInstrument::getInstrument("USD")
# ------------------------------------------------------------------------------
stk      <- FinancialInstrument::stock("SPL.AX", "USD")
SPL.AX   <- FinancialInstrument::getInstrument("SPL.AX")
SPL.AX   <- get("SPL.AX", envir=FinancialInstrument:::.instrument)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
ls(envir=FinancialInstrument:::.instrument)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
ls(envir=FinancialInstrument:::.instrument)
traceback()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
ls(envir=FinancialInstrument:::.instrument)
FinancialInstrument::currency(c("AUD"))                # Set the currency    ###
stock(c("SPL.AX"), currency ="AUD")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
FinancialInstrument::getInstrument("SPL.AX")
library(defaults)
install.packages("Defaults")
ls(envir=FinancialInstrument:::.instrument)
fi <- data.table(ls(envir=FinancialInstrument:::.instrument))
fi
ls(envir = .blotter)
ls(envir = .strategy)
load.strategy("gXema")
save.strategy(here::here("SPL-Dashboard/rdata/", "gXema.rds")))
save.strategy(here::here("SPL-Dashboard/rdata/", "gXema.rds"))
save.strategy(here::here("SPL-Dashboard/rdata/", "gXema"))
save.strategy("gXema")
getwd()
load.strategy(here::here("rdata", "gXema.RData"))
load.strategy(here::here("SPL-Dashboard/rdata", "gXema.RData"))
load.strategy(here::here("SPL-Dashboard/rdata", "gXema"))
instruments.bak <- as.list(FinancialInstrument:::.instrument, all.names=TRUE)
instruments.bak
i <- FinancialInstrument:::.instrument, all.names=TRUE
i <- FinancialInstrument:::.instrument
i
i <- data.table(as.list(FinancialInstrument:::.instrument, all.names=TRUE))
i
i <- as.list(FinancialInstrument:::.instrument, all.names=TRUE)
i
getwd()
saveSymbols.common("SPL.AX")
getwd()
saveSymbols.common("SPY", base_dir="tmpdata")
saveSymbols.common("SPL.AX", base_dir="tmpdata")
saveSymbols.common("SPL.AX", base_dir="SPL-Dashboard")
getSymbols("SPL.AX", src='FI', dir="SPL-Dashboard", split_method='common')
na.omit(getSymbols("SPL.AX", src='FI', dir="SPL-Dashboard", split_method='common'))
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
View(symbols)
na.omit(getSymbols("SPL.AX", src='FI', dir=".", split_method='common'))
xyz<-na.omit(getSymbols("SPL.AX", src='FI', dir=".", split_method='common'))
na.omit(getSymbols("SPL.AX", src='FI', dir=".", split_method='common'))
rm(SPL.AX)
na.omit(getSymbols("SPL.AX", src='FI', dir=".", split_method='common'))
View(SPL.AX)
nrow(SPL.AX)
na.omit(getSymbols(symbols, src='FI', dir=".", split_method='common'))
View(left)
View(symbols)
taskscheduleR:::taskschedulerAddin()
View(trend)
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
devtools::install_github('nathaneastwood/poorman')
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
demo(flip.coin())
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
devtools::install_github("ropensci/plotly")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
dtSPL
dtGoldenDeathEMA
dtGoldenDeathSMA
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
ret
dtSPL
dtGoldenDeathEMA
neitherEMA
tk_xts(anti_join(dtSPL, dtGoldenDeathEMA,
by = c("date" = "index")),date=t)[,4]
tk_xts(anti_join(dtSPL, dtGoldenDeathEMA,
by = c("date" = "index")),date=t)
anti_join(dtSPL, dtGoldenDeathEMA,
by = c("date" = "index"))
glimpse(dtSPL)
glimpse(dtGoldenDeathEMA)
anti_join(dtSPL, dtGoldenDeathEMA, by = c("date" = "index"))
View(dtGoldenDeathEMA)
is.data.table(dtGoldenDeathEMA)
is.data.table(dtSPL)
setkey(dtSPL,date)
setkey(dtGoldenDeathEMA,index)
dtSPL[!dtGoldenDeathEMA]
neitherSMA <- ret * (tk_xts(anti_join(dtSPL, dtGoldenDeathSMA,
by = c("date" = "index")),date=t)[,4])
tk_xts(dtSPL[!dtGoldenDeathEMA],date=t)
tk_xts(dtSPL[!dtGoldenDeathEMA],date=t)[,4]
head(tk_xts(dtSPL[!dtGoldenDeathEMA],date=t)[,4])
ret * (tk_xts(dtSPL[!dtGoldenDeathEMA],date=t)[,4])
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
traceback()
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
View(trend)
trend[order(endDate)]
tail(trend[order(endDate)][indicator == 'EMA'],1
tail(trend[order(endDate)][indicator == 'EMA'],1)
tail(trend[order(endDate)][indicator == 'EMA'],1)[,8]
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
y
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
library(devtools)
install_github("lenkiefer/darklyplot")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
install.packages("devtools")
install.packages("remotes")
remotes::install_github("r-lib/rlang")
install.packages("remotes")
remotes::install_github("r-lib/rlang")
source('~/GitHub/splGoldenDeathX/splGoldenDeathX.r', echo=TRUE)
class(crossEMA)
View(crossEMA)
View(crossSMA)
View(crossEMA)
View(dT.sig)
View(dt_ma)
View(dT.ind)
class(dt_ma)
dt_func(dt_ma, sig)
lapply(dt_func(dt_ma, sig), function(x) x)
lapply(dt_func(dt_ma[id==1], sig), function(x) x)
dt_func(dt_ma[id==1], sig)
x<- dt_func(dt_ma[id==1], sig)
class(x)
y <- c("EMA.020","EMA.050","EMA.100","EMA.200")
class(y\)
class(y)
y
x == y
