################################################################################
# 1.0 Setup
################################################################################
x0100_setup(nXsma)
################################################################################
# 2.0	Indicators
################################################################################
apply(crossSMA, 1, function(x) indicators(x[1], as.integer(x[2]),as.integer(x[3]), x[4]))
str(getStrategy(nXsma)$indicators)
# ------------------------------------------------------------------------------
ApplyIndicators(nXsma)                                        # apply indicators
################################################################################
# 3.0	Signals
################################################################################
AddSignals(sigFormula,sig_sma_col, nXsma_open,  trigger, TRUE , nXsma, "shortEntry")
AddSignals(sigFormula,sig_sma_col, nXsma_close, trigger, TRUE , nXsma, "shortExit")
# AddSignals("sigFormula",c("SMA.020","SMA.050","SMA.100","SMA.200"), nXsma_open,  "trigger", TRUE , nXsma, "shortEntry")
# AddSignals("sigFormula",c("SMA.020","SMA.050","SMA.100","SMA.200"), nXsma_close, "trigger", TRUE , nXsma, "shortExit")
# ------------------------------------------------------------------------------
str(getStrategy(nXsma)$signals)
ApplySignals(nXsma)
################################################################################
# 4.0	Rules                                      https://tinyurl.com/y93kc22r
################################################################################
rules(paste(nXsma, "shortEntry", sep = "_"), TRUE, orderqty, "long", "market", "Open", "market", 0, "enter")
rules(paste(nXsma, "shortExit",  sep = "_"), TRUE,  "all",   "long", "market", "Open", "market", 0, "exit")
################################################################################
# 5.0	Position Limits
################################################################################
positionLimits(maxpos, minpos)
################################################################################
# 6.0	Strategy
################################################################################
Strategy(nXsma)
################################################################################
# 7.0	Evaluation - update P&L and generate transactional history
################################################################################
evaluation()
################################################################################
# 8.0	Trend - create dashboard dataset
################################################################################
report(nXsma)
# ------------------------------------------------------------------------------
